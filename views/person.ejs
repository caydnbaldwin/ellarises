<!-- This is where the person/participant can be edited. A person can edit their own account details. -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile | <%= session.person.personid %></title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Montserrat:wght@300;400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="icon" type="image/x-icon" href="/images/bromunity/favicon.ico">
  <style>
      .accordion-button.pink {
        background-color: #ffc0cb;
        color: #212529;
        border-color: #ffc0cb;
      }

      .accordion-button.pink:not(.collapsed) {
        background-color: #ffc0cb;
        color: #212529;
        box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.125);
      }

      .accordion-button.pink:focus {
        border-color: #ffc0cb;
        box-shadow: 0 0 0 0.25rem rgba(255, 192, 203, 0.35);
      }
    </style>
</head>
<body class="bg--light">
  <!-- Brings in the navbar from the components directory -->
  <%- include('components/navbar') %>
  <main class="container-fluid px-3 px-md-4">
    <div class="row g-4">
      <div class="col-12">
        <div id="accordionExample" class="accordion mt-4">
          <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button pink" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  Add Person
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <%- include('components/persons-update-person') %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  
  <script>
        async function deleteProfile(personid) {
            if (!confirm('Are you sure you want to delete your account?')) {
                return;
            }
            try {
                const response = await fetch(`/persons/mi/${personid}`, {
                    method: 'DELETE'
                });
                if (!response.ok) {
                    throw new Error('Failed to delete user.');
                };
                window.location.reload();
            } catch (error) {
                console.error(error);
                alert(error.message);
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-hmmvjQh+SQnpsx1Tq2z1h3qW1QFh7t3E2rHq8P7f4qC3dYj3Q2kqJXQG2lJqFZ3K" crossorigin="anonymous"></script>
</body>
</html>