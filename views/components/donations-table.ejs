<div class="table-responsive">
  <table class="table table-hover align-middle mb-0">
    <thead class="bg-danger-subtle text-danger-emphasis">
      <tr class="text-uppercase small">
        <th scope="col">Donor</th>
        <th scope="col">Donation Date</th>
        <th scope="col">Amount</th>
      </tr>
    </thead>
    <tbody>
      <% donations.forEach(function(donation) { %>
        <% const donorName = [donation.firstname, donation.lastname].filter(Boolean).join(' '); %>
        <tr>
          <td class="fw-semibold text-nowrap">
            <% if (donorName) { %>
              <div class="text-danger-emphasis"><%= donorName %></div>
              <div class="small text-muted">ID: <%= donation.personid %></div>
            <% } else { %>
              <div class="text-danger-emphasis">Person <%= donation.personid %></div>
            <% } %>
          </td>
          <td class="text-nowrap">
            <% const donationDate = donation.donationdate ? new Date(donation.donationdate) : null; %>
            <% if (donationDate && !Number.isNaN(donationDate.getTime())) { %>
              <%= donationDate.toLocaleDateString('en-US', { dateStyle: 'medium' }) %>
            <% } else { %>
              <span class="text-muted">—</span>
            <% } %>
          </td>
          <td class="fw-semibold">
            <% const amount = Number(donation.donationamount); %>
            <% if (!Number.isNaN(amount)) { %>
              <span class="badge bg-danger-subtle text-danger-emphasis"><%= amount.toLocaleString('en-US', { style: 'currency', currency: 'USD' }) %></span>
            <% } else { %>
              <span class="text-muted">—</span>
            <% } %>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>